{% extends 'core/base.html' %}
{% load static %}

{% block content %}
<div class="person-detail-container">
    <h1 class="page-title">{{ person.first_name }} {{ person.last_name }}</h1>
    <div class="content-divider"></div>
    
    <div class="person-details">
        <div class="person-image-and-info">
            <div class="person-image">
                {% if person.image %}
                    <img src="{{ person.image.url }}" alt="{{ person.get_name }}" width="300">
                {% else %}
                    <img src="{% static 'images/default_person.png' %}" alt="Default Person Image" width="300">
                {% endif %}
            </div>
            <div class="person-info">
                <h2>Contact Information</h2>
                <div class="info-grid">
                    <div class="info-column">
                        <p><strong>Email:</strong> <a href="mailto:{{ person.email }}">{{ person.email }}</a></p>
                        <p><strong>Phone:</strong> {{ person.phone }}</p>
                        <p><strong>Preferred Contact:</strong> {{ person.get_preferred_contact_method_display }}</p>
                        <p><strong>Address:</strong> {{ person.street_address }}</p>
                        <p><strong>City:</strong> {{ person.city }}</p>
                        <p><strong>State:</strong> {{ person.get_state_display }}</p>
                        <p><strong>Zip Code:</strong> {{ person.zip_code }}</p>
                        <p><strong>Home Country:</strong> {{ person.home_country|default:"Not specified" }}</p>
                    </div>
                    <div class="info-column">
                        <p><strong>Pipeline Stage:</strong> {{ person.get_people_pipeline_display }}</p>
                        <p><strong>Priority:</strong> {{ person.get_priority_display }}</p>
                        <p><strong>Assigned To:</strong> {{ person.get_assigned_to_display }}</p>
                        <p><strong>Source:</strong> {{ person.get_source_display }}</p>
                        <p><strong>Referred By:</strong> {{ person.referred_by|default:"Not specified" }}</p>
                        <p><strong>Marital Status:</strong> {{ person.get_marital_status_display }}</p>
                        <p><strong>Spouse Recruit:</strong> {{ person.spouse_recruit|yesno:"Yes,No" }}</p>
                        <p><strong>Color:</strong> {{ person.get_color_display }}</p>
                        <p><strong>Virtuous:</strong> {{ person.virtuous|yesno:"Yes,No" }}</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="full-width-fields">
            <p><strong>Desired Service:</strong> {{ person.desired_service|default:"Not specified" }}</p>
            <p><strong>Info Given:</strong> {{ person.info_given|default:"Not specified" }}</p>
            <p><strong>Initial Notes:</strong> {{ person.initial_notes|default:"No notes available" }}</p>
        </div>
        
        <p><strong>Date Created:</strong> {{ person.date_created|date:"F d, Y" }}</p>
        <p><strong>Date Modified:</strong> {{ person.date_modified|date:"F d, Y" }}</p>
        
        <div class="person-actions">
            <a href="{% url 'contacts:person_edit' person.pk %}" class="btn btn-warning">Edit</a>
            <a href="#" class="btn btn-info">Log Interaction</a>
            <a href="#" class="btn btn-primary">Create Task</a>
        </div>
    </div>

    <div class="interaction-history">
        <h2>Recent Interactions</h2>
        {% comment %}
        {% if interactions %}
            {% for interaction in interactions %}
                <div class="interaction">
                    <p><strong>{{ interaction.date|date:"Y-m-d" }}</strong> - {{ interaction.get_type_display }}</p>
                    <p>{{ interaction.notes }}</p>
                </div>
            {% endfor %}
        {% else %}
            <p>No recent interactions recorded.</p>
        {% endif %}
        {% endcomment %}
    </div>
</div>
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/person_detail.css' %}">
{% endblock %}